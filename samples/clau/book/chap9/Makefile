# @(#) some/gen_mk32.efc 2.2 5/11/93 16:26:59 [6/4/93 21:50:01]

# 96F8647, 96F8648 (C) Copyright IBM Corp. 1992, 1993
# All Rights Reserved
# Licensed Materials - Property of IBM

# Makefile for: emitrep    [Mon Jan  3 18:25:04 1994]
# Author: SOMObjects Emitter Framework

# We set SOMBASE to \som by default, if your installation is
# different and som has been installed elsewhere, then change the SOMBASE
# variable.
# SOMBASE     = \som
# To ensure that all other Makefiles generated by the newemit program have
# this information then alter the template file in 
# $(SOMBASE)\include\gen_mk32.efw to reflect this difference.
DLLDEST     = $(SOMBASE)\lib
EFWDEST     = $(SOMBASE)\include
INCLUDEPATH = -I$(SOMBASE)\include
LIBDIRPATH  = $(SOMBASE)\lib

SRCS        = emitrep.c rep.c rep.efw rep.idl
OBJS        = emitrep.obj rep.obj
TARGET      = emitrep.dll
CLEANFILES  = rep.h

SCFLAGS     = -D__PRIVATE__ -sh;ih -m noaddstar
CC	    = icc
CFLAGS	    = -I. -Q+ -W3 -D_OS2 -D__MIG_LIB__
LINKER      = link386
LDFLAGS     = /packd /packc /exepack /align:4 /noi /m $(LDEBUG) /nol /PM:VIO 
LIBLIST     = $(LIBDIRPATH)\somtk os2386 

.SUFFIXES: .c .idl .ih .obj

.c.obj:
	$(CC) -I. $(INCLUDEPATH) $(CFLAGS) -Ge- -c $<

.idl.ih:
	cmd /c "sc $(SCFLAGS) $*.idl"
.idl.c:
        sc -sc *.idl

$(TARGET): $(OBJS)
	$(LINKER) $(LDFLAGS) $(OBJS), \
	$*.dll, $*/m, $(LIBLIST), $*.def

clean:
	-del *.obj *.dll *.map *.ih $(CLEANFILES)

emitrep.obj: emitrep.c rep.ih

rep.obj: rep.c rep.ih

rep.ih: rep.idl
rep.c:  rep.idl
